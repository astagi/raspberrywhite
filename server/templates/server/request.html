{% extends "server/base.html" %}

{% load static %}

{% block content %}

  <h1>New request</h1>

  <div class="ui-widget">
    <label for="songs">Songs: </label>
    <input id="songs">
    <div id="songlist"></div>
  </div>

  <script type="text/javascript">
    $( document ).ready(function() {
      load_songs();
    });

    function load_songs() {
      $.get("/songs/?term=" + $("#songs").val(),function(data,status){
        $( "#songlist" ).empty();
        for(var i = 0 ; i < data.length ; i++) {
          $("#songlist").append( "<div>" + data[i]['label'] + "</div>" );
        }
      });
    }

    $("#songs").on('input',function(e){
      load_songs();
    });
  </script>

{% endblock %}